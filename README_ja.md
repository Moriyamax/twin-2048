# Twin-2048: Human vs AI

[ゲーム開始](https://Moriyamax.github.io/twin-2048/Twin2048gameVS_CPU.html)

2枚の盤面を同時に操作する2048派生ゲームです。
プレイヤーとCPUが交互に操作し、先に盤面を詰まらせた方が負けです。

## デモ
HTMLファイルを直接ブラウザで開くだけで動作します。依存ライブラリ・ビルド不要。

## ゲームルール

- 4×4の盤面が2つあり、**両方に同じ操作が反映されます**
- 自分のターンに**どちらかの盤面を詰まらせると負けになります**
- **合計が32以上のパネルを生成したターンはボーナスターンとして追加で更に1ターン操作できます**
- ボーナスターンは連鎖 — ボーナス中にさらに32+を作れば続けて操作可能
- ただし**連続操作中に自分の盤面が詰まれば負けです**。
- キーボード（矢印キー）またはスワイプ操作

## CPU設計

CPUはゲーム開始時、3種類のうちいずれかのタイプがランダムに決まります。
プレイヤーから判別できません（PCの場合、F12キーでブラウザの開発者ツール・Consoleタブを開くと確認できます）。

| タイプ | 出現確率 | 先読み深さ | 特徴 |
|--------|----------|------------|------|
| Normal | 75% | 6手 | 標準的な強さ |
| Strong | 20% | 12手 | 序盤から安定して強い |
| Hidden | 5% | 通常6手 / 終盤30手 | 普段は弱く見えるが、両盤面の空き枠合計が12以下になると先読みを5倍に増やす |

CPUのアルゴリズムはモンテカルロシミュレーション（500試行）で、各方向に対してランダムプレイアウトを繰り返し生存率を評価します。

また、**10回リセットするごとに必ずHiddenタイプが出現する**仕様です。

## 技術的ポイント

**単体HTMLで完結**  
外部ライブラリなし。HTML/CSS/JSのみ。

**ボーナスターン連鎖設計**  
ターン交代フラグ（`isPlayerTurn`）を維持したまま同じプレイヤーが`executeStep`を繰り返し呼ぶことで連鎖を実現しています。CPUボーナス時は900ms、通常ターン交代時は600msのディレイで視覚的に区別しています。

**CPUの非対称情報設計**  
CPUタイプはコンソールのみ出力され、UIに表示されません。
Hiddenタイプは終盤まで通常CPUと区別がつかないという意図的なゲームデザインです。

**アニメーション**  
`requestAnimationFrame`によるスライドアニメーションとマージ時の膨張アニメーションをCSSトランジションなしで実装しています。

## 操作方法

| 入力 | 動作 |
|------|------|
| ↑↓←→ キー | 盤面を移動 |
| スワイプ | 盤面を移動（モバイル） |
| Reset Game | ゲームをリセット（CPUタイプ再抽選） |

## ファイル構成

```
Twin2048gameVS_CPU.html   // ゲーム本体（これ1ファイルで完結）
```

## ライセンス

MIT
